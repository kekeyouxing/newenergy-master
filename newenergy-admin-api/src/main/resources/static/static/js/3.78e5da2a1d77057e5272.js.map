{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./src/api/role.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/views/sys/admin.vue","webpack:///./src/api/admin.js","webpack:///./src/views/sys/admin.vue?81b1","webpack:///./src/views/sys/admin.vue"],"names":["module","exports","default","__webpack_require__","__esModule","__webpack_exports__","query","request","url","method","params","data","__WEBPACK_IMPORTED_MODULE_0__utils_request__","anObject","get","getIterator","it","iterFn","TypeError","call","admin","name","components","Pagination","list","total","roleOptions","listLoading","listQuery","page","limit","username","undefined","dataForm","id","password","roleIds","dialogFormVisible","dialogStatus","textMap","update","create","rules","required","message","trigger","downloadLoading","computed","headers","X-Litemall-Admin-Token","Object","auth","activated","_this","this","getList","role","then","response","created","_this2","methods","formatRole","roleId","i","length","value","label","_this3","items","catch","handleFilter","resetForm","uploadAvatar","avatar","handleCreate","_this4","$nextTick","$refs","clearValidate","createData","_this5","validate","valid","unshift","$notify","success","title","error","errmsg","handleUpdate","row","_this6","assign_default","updateData","_this7","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","v","index","indexOf","splice","err","return","handleDelete","_this8","sys_admin","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","width","attrs","clearable","placeholder","model","callback","$$v","$set","expression","_v","type","icon","on","click","directives","rawName","size","element-loading-text","border","fit","highlight-current-row","align","prop","sortable","scopedSlots","_u","key","fn","scope","_l","margin-right","_s","class-name","$event","update:page","update:limit","pagination","modal-append-to-body","visible","update:visible","ref","margin-left","status-icon","label-position","label-width","auto-complete","multiple","item","slot","staticRenderFns","Component","normalizeComponent"],"mappings":"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","file":"static/js/3.78e5da2a1d77057e5272.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 2 3","import request from '@/utils/request'\n\nexport function listRole (query) {\n  return request({\n    url: '/role/list',\n    method: 'get',\n    params: query\n  })\n}\n\nexport function createRole (data) {\n  return request({\n    url: '/role/create',\n    method: 'post',\n    data\n  })\n}\n\nexport function readRole (data) {\n  return request({\n    url: '/role/read',\n    method: 'get',\n    data\n  })\n}\n\nexport function deleteRole (data) {\n  return request({\n    url: '/role/delete',\n    method: 'post',\n    data\n  })\n}\n\nexport function updateRole (data) {\n  return request({\n    url: '/role/update',\n    method: 'post',\n    data\n  })\n}\nexport function roleOptions (query) {\n  return request({\n    url: '/role/options',\n    method: 'get',\n    params: query\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/role.js","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 2 3","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 2 3","<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.username\" clearable class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入管理员名称\"/>\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">查找</el-button>\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleCreate\">添加</el-button>\n    </div>\n\n    <!-- 查询结果 -->\n    <el-table v-loading=\"listLoading\" :data=\"list\" size=\"small\" element-loading-text=\"正在查询中。。。\" border fit highlight-current-row>\n      <el-table-column align=\"center\" label=\"管理员ID\" prop=\"id\" sortable/>\n\n      <el-table-column align=\"center\" label=\"管理员名称\" prop=\"username\"/>\n\n      <el-table-column align=\"center\" label=\"管理员角色\" prop=\"roleIds\">\n        <template slot-scope=\"scope\">\n          <el-tag v-for=\"roleId in scope.row.roleIds\" :key=\"roleId\" type=\"primary\" style=\"margin-right: 20px;\"> {{ formatRole(roleId) }} </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" label=\"操作\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope.row)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n    <!-- 添加或修改对话框 -->\n    <el-dialog :modal-append-to-body=\"false\" :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"dataForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"管理员名称\" prop=\"username\">\n          <el-input v-model=\"dataForm.username\"/>\n        </el-form-item>\n        <el-form-item label=\"管理员密码\" prop=\"password\">\n          <el-input v-model=\"dataForm.password\" type=\"password\" auto-complete=\"off\"/>\n        </el-form-item>\n        <el-form-item label=\"管理员角色\" prop=\"roleIds\">\n          <el-select v-model=\"dataForm.roleIds\" multiple placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in roleOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"/>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n        <el-button v-if=\"dialogStatus=='create'\" type=\"primary\" @click=\"createData\">确定</el-button>\n        <el-button v-else type=\"primary\" @click=\"updateData\">确定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { listAdmin, createAdmin, updateAdmin, deleteAdmin } from '@/api/admin'\nimport { roleOptions } from '@/api/role'\nimport { getToken } from '@/utils/auth'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\n\nexport default {\n  name: 'Admin',\n  components: { Pagination },\n  data () {\n    return {\n      list: null,\n      total: 0,\n      roleOptions: null,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        username: undefined\n      },\n      dataForm: {\n        id: undefined,\n        username: undefined,\n        password: undefined,\n        roleIds: []\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n      textMap: {\n        update: '编辑',\n        create: '创建'\n      },\n      rules: {\n        username: [\n          { required: true, message: '管理员名称不能为空', trigger: 'blur' }\n        ],\n        password: [{ required: true, message: '密码不能为空', trigger: 'blur' }]\n      },\n      downloadLoading: false\n    }\n  },\n  computed: {\n    headers () {\n      return {\n        'X-Litemall-Admin-Token': getToken()\n      }\n    }\n  },\n  activated () {\n    this.getList()\n    roleOptions()\n      .then(response => {\n        this.roleOptions = response.data.data\n      })\n  },\n  created () {\n    this.getList()\n    roleOptions()\n      .then(response => {\n        this.roleOptions = response.data.data\n      })\n  },\n  methods: {\n    formatRole (roleId) {\n      for (let i = 0; i < this.roleOptions.length; i++) {\n        if (roleId === this.roleOptions[i].value) {\n          return this.roleOptions[i].label\n        }\n      }\n      return ''\n    },\n    getList () {\n      this.listLoading = true\n      listAdmin(this.listQuery)\n        .then(response => {\n          this.list = response.data.data.items\n          this.total = response.data.data.total\n          this.listLoading = false\n        })\n        .catch(() => {\n          this.list = []\n          this.total = 0\n          this.listLoading = false\n        })\n    },\n    handleFilter () {\n      this.listQuery.page = 1\n      this.getList()\n    },\n    resetForm () {\n      this.dataForm = {\n        id: undefined,\n        username: undefined,\n        password: undefined,\n        roleIds: []\n      }\n    },\n    uploadAvatar: function (response) {\n      this.dataForm.avatar = response.data.url\n    },\n    handleCreate () {\n      this.resetForm()\n      this.dialogStatus = 'create'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    createData () {\n      this.$refs['dataForm'].validate(valid => {\n        if (valid) {\n          createAdmin(this.dataForm)\n            .then(response => {\n              this.list.unshift(response.data.data)\n              this.dialogFormVisible = false\n              this.$notify.success({\n                title: '成功',\n                message: '添加管理员成功'\n              })\n            })\n            .catch(response => {\n              this.$notify.error({\n                title: '失败',\n                message: response.data.errmsg\n              })\n            })\n        }\n      })\n    },\n    handleUpdate (row) {\n      this.dataForm = Object.assign({}, row)\n      this.dialogStatus = 'update'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    updateData () {\n      this.$refs['dataForm'].validate(valid => {\n        if (valid) {\n          updateAdmin(this.dataForm)\n            .then(() => {\n              for (const v of this.list) {\n                if (v.id === this.dataForm.id) {\n                  const index = this.list.indexOf(v)\n                  this.list.splice(index, 1, this.dataForm)\n                  break\n                }\n              }\n              this.dialogFormVisible = false\n              this.$notify.success({\n                title: '成功',\n                message: '更新管理员成功'\n              })\n            })\n            .catch(response => {\n              this.$notify.error({\n                title: '失败',\n                message: response.data.errmsg\n              })\n            })\n        }\n      })\n    },\n    handleDelete (row) {\n      deleteAdmin(row)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '删除管理员成功'\n          })\n          const index = this.list.indexOf(row)\n          this.list.splice(index, 1)\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/sys/admin.vue","import request from '@/utils/request'\n\nexport function listAdmin (query) {\n  return request({\n    url: '/admin/list',\n    method: 'get',\n    params: query\n  })\n}\n\nexport function createAdmin (data) {\n  return request({\n    url: '/admin/create',\n    method: 'post',\n    data\n  })\n}\n\nexport function readminAdmin (data) {\n  return request({\n    url: '/admin/readmin',\n    method: 'get',\n    data\n  })\n}\n\nexport function updateAdmin (data) {\n  return request({\n    url: 'admin/update',\n    method: 'post',\n    data\n  })\n}\nexport function deleteAdmin (data) {\n  return request({\n    url: '/admin/delete',\n    method: 'post',\n    data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/admin.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-input',{staticClass:\"filter-item\",staticStyle:{\"width\":\"200px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请输入管理员名称\"},model:{value:(_vm.listQuery.username),callback:function ($$v) {_vm.$set(_vm.listQuery, \"username\", $$v)},expression:\"listQuery.username\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"查找\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"filter-item\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],attrs:{\"data\":_vm.list,\"size\":\"small\",\"element-loading-text\":\"正在查询中。。。\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"管理员ID\",\"prop\":\"id\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"管理员名称\",\"prop\":\"username\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"管理员角色\",\"prop\":\"roleIds\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.roleIds),function(roleId){return _c('el-tag',{key:roleId,staticStyle:{\"margin-right\":\"20px\"},attrs:{\"type\":\"primary\"}},[_vm._v(\" \"+_vm._s(_vm.formatRole(roleId))+\" \")])})}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleUpdate(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total>0),expression:\"total>0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.listQuery.page,\"limit\":_vm.listQuery.limit},on:{\"update:page\":function($event){return _vm.$set(_vm.listQuery, \"page\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.listQuery, \"limit\", $event)},\"pagination\":_vm.getList}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"modal-append-to-body\":false,\"title\":_vm.textMap[_vm.dialogStatus],\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticStyle:{\"width\":\"400px\",\"margin-left\":\"50px\"},attrs:{\"rules\":_vm.rules,\"model\":_vm.dataForm,\"status-icon\":\"\",\"label-position\":\"left\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"管理员名称\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.dataForm.username),callback:function ($$v) {_vm.$set(_vm.dataForm, \"username\", $$v)},expression:\"dataForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"管理员密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\"},model:{value:(_vm.dataForm.password),callback:function ($$v) {_vm.$set(_vm.dataForm, \"password\", $$v)},expression:\"dataForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"管理员角色\",\"prop\":\"roleIds\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.dataForm.roleIds),callback:function ($$v) {_vm.$set(_vm.dataForm, \"roleIds\", $$v)},expression:\"dataForm.roleIds\"}},_vm._l((_vm.roleOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),(_vm.dialogStatus=='create')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.createData}},[_vm._v(\"确定\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateData}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0c6e1379\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/sys/admin.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0c6e1379\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./admin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/sys/admin.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}